# ИНН без маски и понятной ошибки (при неверной длине/формате сохранение «молча» блокируется)

**Project:** CRM  
**Компонент/Модуль:** Контакты → Карточка контакта → Доп. информация → Работа и доходы (поле «ИНН»)  
**Экран/URL/Маршрут:** ``  
**Пример:** https://crm-test.ru  
**Reporter:** Юлия  
**Окружение:** test (`crm-test`), актуально на 2025-09-18  
**Сборка/Версия:** v.56e46cf9
**Устройство/ОС/Браузер/Разрешение:** Windows 11, Chrome 140, 1920×1080  
**Роль пользователя:** Админ
**Повторяемость:** всегда  
**Частота:** 5/5

## Шаги для воспроизведения
1. Открыть карточку контакта → вкладка **Доп. информация** → блок **Работа и доходы**.  
2. В поле **ИНН** ввести:  
   - 3–11 цифр (например, `111`),  
   - 13–15 цифр (например, `1234567890123`),  
   - буквы/смешанные символы.  
3. Нажать **Сохранить**.

## Ожидаемый результат
- **Только цифры** допускаются во вводе.  
- Длина строго **12** для физлица (или **10** для юрлица — если тип поддерживается и выбран).  
- При неверной длине/формате поле подсвечено и показан понятный текст ошибки (например, «Неверный формат ИНН» / «ИНН должен содержать 12 цифр»).  
- Сохранение блокируется до исправления значения.

## Фактический результат
- Поле принимает **любое количество** символов/букв.  
- При сохранении форма **не сохраняется**, сообщение об ошибке **неочевидное/отсутствует** (пользователь не понимает причину).

## Скриншоты/Видео/HAR/Логи
- Видео (по желанию): `bugs/assets/Запись экрана 2025-09-16 172447.mp4`.  

## Доп. детали
- **Предполагаемая причина:** отсутствие маски/валидатора по длине и формату на фронте; на бэке — либо общий 4xx без маппинга ошибки к полю, либо silent-fail в UI.  
- **Риски:** некорректные карточки, блокировка сохранений без объяснения, проблемы при отчетности/интеграциях.  
- **Связанные области:** маски и валидации других идентификаторов (СНИЛС, ОГРН), импорт/массовое редактирование.

## Acceptance для фикса
- Маска ввода: **только цифры**, авто-ограничение длины (12; для юрлица — 10 при соответствующем типе).  
- Понятный текст ошибки под полем; подсветка поля.  
- API возвращает **422** с привязкой к полю `inn`; UI корректно отображает ошибку.  
- Пустое значение — по требованиям (допустимо/обязательно) с соответствующим сообщением.  
- A11y: ошибка читабельна, есть aria-атрибуты.  
- Нет ошибок в консоли, нет «тихих» блокировок.

