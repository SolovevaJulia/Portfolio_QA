# BUG-2025-10-30 — Контур (CV) → Распознавание паспорта: загрузка WEBP даёт 503 и «роняет» модалку

**Project:** CRM  
**Компонент/Модуль:** Контур (CV) → Распознавание паспорта (модалка)  
**Экран/URL/Маршрут:** https://crm-test.anflat.ru/tools/kontur-check
**Reporter:** Юлия  
**Окружение:** **test**  
**Сборка/Версия:** **v.689ce285**  
**Роль:** **admin**  
**ОС/Браузер/Разрешение:** **Windows 11 / Chrome (последняя) / 1920×1080**

**Повторяемость:** всегда  
**Частота:** 5/5

## Шаги для воспроизведения
1. Открыть «Проверить физ. лицо» (модалка CV).  
2. Выбрать файл паспорта в формате **.webp**.  
3. Дождаться реакции UI/Network.

## Ожидаемый результат
- Неподдерживаемый формат обрабатывается: понятная ошибка, модалка остаётся стабильной.  
- Либо формат поддерживается — распознавание успешно.

## Фактический результат
- Запрос обработки возвращает **503**, модалка **крашится/закрывается**.

## Скриншоты/Видео/HAR/Логи
- Скрин: `bugs/crm/assets/Снимок экрана 2025-10-30 110013.png`  

## Доп. детали
- Возможная причина: отсутствует конвертация/валидация `.webp` на бекенде/воркере.  

**Acceptance для фикса**
- `.webp` либо поддержан (конвертация в jpeg/png), либо отклоняется с явной ошибкой.  
- Нет падений модалки/JS-ошибок; логика завершает цикл корректно.  
- Метрика `cv.detect.send.dialog` отправляется 1 раз с корректными полями.
